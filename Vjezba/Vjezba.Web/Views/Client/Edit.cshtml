@model Vjezba.Model.Client

@{
	ViewData["Title"] = "Uređivanje klijenta";
}

<nav aria-label="breadcrumb">
	<ol class="breadcrumb">
		<li class="breadcrumb-item"><a asp-action="Index">Popis klijenata</a></li>
		<li class="breadcrumb-item active" aria-current="page">Uređivanje klijenta</li>
	</ol>
</nav>

<div class="row">
	<div class="col-md-4">
		<form asp-action="Edit">
			<input type="hidden" asp-for="ID" />
			<partial name="_CreateOrEdit" />
		</form>
	</div>
	<div class="col-md-6">
		<label class="control-label">Photo</label>
		<form id="photos" asp-controller="Client" asp-action="UploadAttachment" asp-route-clientId="@Model.ID"
			enctype="multipart/form-data" class="dropzone">

		</form>
	</div>
	<div>
		<h2>Lista attachment-a</h2>
		<partial name="_AttachmentList" model="new List<Attachement>()" />
	</div>
</div>

@section scripts {
	<script>
		Dropzone.options.photos = {
			success: function(file, response) {
				console.log({ file, response });
			}
		};
	</script>
	<script>
        $(document).ready(function () {
            $.ajax({
                url: "@Url.Action("GetAttachments", new { clientId = @Model.ID })",
                method: "GET"
            });
        });
    </script>
}